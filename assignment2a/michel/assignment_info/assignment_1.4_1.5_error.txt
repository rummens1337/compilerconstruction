Hi all,

Some people have experienced vague compiler errors during assignment 1.4 and 1.5.

During these assignments it may be necessary to add some lines the yacc file, you will be gaining more familiarity with parsing next week. This file can be found in src/scanparse/civic.y. The first few lines define tokens and lines. Here it is important to add a 'module' type next to the expr nodetype.

Furthermore, we have defined the top level to be of the module type, as stated in the assignment. In order to make sure the program will be parsed correctly, we'll need to replace the stmts node as top level node.  The top level node is indicated by the program rule on the left side of the ':'.

Then we need to add another rule so the module will be parsed correctly. The module consists of the stmts node type. Then the content of the rule will look something like this:



program: module
                {
                 parseresult = $1;
                }
                ;

module: stmts
               {

                $$ = TBmakeModule(0, 0, 0, 0, 0, $1);

              }
              ;

But it is dependent on how you've implemented the module node type in the ast. If this gives warnings during compilation you will need to check how your creation function for the node will look like. You can do this by looking into the ast.html generated by compilation of the framework.  Under N_module you will found the corresponding creation function. The argument that corresponds to the stmts should be $1. In the example case above, this is the last argument. $1 is a handle to the first element of the rule.

If many of you experience problems doing this, we can spend some time in the lab to explain it, otherwise ask one of the TAs.

The TAs.